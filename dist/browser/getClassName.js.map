{"version":3,"file":"getClassName.js","names":["_optionsDefaults","_interopRequireDefault","require","e","__esModule","isNamespacedStyleName","styleName","includes","handleError","message","handleMissingStyleName","Error","console","warn","getClassNameForNamespacedStyleName","styleModuleImportMap","handleMissingStyleNameOption","styleNameParts","split","importName","moduleName","optionsDefaults","concat","getClassNameFromMultipleImports","importKeysWithMatches","Object","keys","map","importKey","filter","length","join","_default","exports","styleNameValue","options","styleModuleImportMapKeys","_ref","_ref$handleMissingSty","_ref$autoResolveMulti","autoResolveMultipleImports","styleModuleMap","className"],"sources":["../../src/getClassName.js"],"sourcesContent":["// @flow\n\nimport optionsDefaults from './schemas/optionsDefaults';\nimport type {\n  StyleModuleMapType,\n  StyleModuleImportMapType,\n  HandleMissingStyleNameOptionType,\n  GetClassNameOptionsType,\n} from './types';\n\nconst isNamespacedStyleName = (styleName: string): boolean => styleName.includes('.');\n\nconst handleError = (\n  message: string,\n  handleMissingStyleName: HandleMissingStyleNameOptionType,\n): null => {\n  if (handleMissingStyleName === 'throw') {\n    throw new Error(message);\n  } else if (handleMissingStyleName === 'warn') {\n    // eslint-disable-next-line no-console\n    console.warn(message);\n  }\n\n  return null;\n};\n\nconst getClassNameForNamespacedStyleName = (\n  styleName: string,\n  styleModuleImportMap: StyleModuleImportMapType,\n  handleMissingStyleNameOption?: HandleMissingStyleNameOptionType,\n): ?string => {\n  // Note:\n  // Do not use the desctructing syntax with Babel.\n  // Desctructing adds _slicedToArray helper.\n  const styleNameParts = styleName.split('.');\n  const importName = styleNameParts[0];\n  const moduleName = styleNameParts[1];\n  const handleMissingStyleName = handleMissingStyleNameOption\n    || optionsDefaults.handleMissingStyleName;\n\n  if (!moduleName) {\n    return handleError(`Invalid style name: ${styleName}`, handleMissingStyleName);\n  }\n\n  if (!styleModuleImportMap[importName]) {\n    return handleError(`CSS module import does not exist: ${importName}`, handleMissingStyleName);\n  }\n\n  if (!styleModuleImportMap[importName][moduleName]) {\n    return handleError(`CSS module does not exist: ${moduleName}`, handleMissingStyleName);\n  }\n\n  return styleModuleImportMap[importName][moduleName];\n};\n\nconst getClassNameFromMultipleImports = (\n  styleName: string,\n  styleModuleImportMap: StyleModuleImportMapType,\n  handleMissingStyleNameOption?: HandleMissingStyleNameOptionType,\n): ?string => {\n  const handleMissingStyleName = handleMissingStyleNameOption\n    || optionsDefaults.handleMissingStyleName;\n\n  const importKeysWithMatches = Object.keys(styleModuleImportMap)\n    .map((importKey) => styleModuleImportMap[importKey][styleName] && importKey)\n    .filter((importKey) => importKey);\n\n  if (importKeysWithMatches.length > 1) {\n    throw new Error(`Cannot resolve styleName \"${styleName}\" because it is present in multiple imports:`\n      + `\\n\\n\\t${importKeysWithMatches.join('\\n\\t')\n      }\\n\\nYou can resolve this by using a named import, e.g:`\n      + `\\n\\n\\timport foo from \"${importKeysWithMatches[0]}\";`\n      + `\\n\\t<div styleName=\"foo.${styleName}\" />`\n      + '\\n\\n');\n  }\n\n  if (importKeysWithMatches.length === 0) {\n    return handleError(`Could not resolve the styleName '${styleName}'.`, handleMissingStyleName);\n  }\n\n  return styleModuleImportMap[importKeysWithMatches[0]][styleName];\n};\n\nexport default (\n  styleNameValue: string,\n  styleModuleImportMap: StyleModuleImportMapType,\n  options?: GetClassNameOptionsType,\n): string => {\n  const styleModuleImportMapKeys = Object.keys(styleModuleImportMap);\n\n  const {\n    handleMissingStyleName = optionsDefaults.handleMissingStyleName,\n    autoResolveMultipleImports = optionsDefaults.autoResolveMultipleImports,\n  } = options || {};\n\n  if (!styleNameValue) {\n    return '';\n  }\n\n  return styleNameValue\n    .split(' ')\n    .filter((styleName) => styleName)\n    .map((styleName) => {\n      if (isNamespacedStyleName(styleName)) {\n        return getClassNameForNamespacedStyleName(\n          styleName,\n          styleModuleImportMap,\n          handleMissingStyleName,\n        );\n      }\n\n      if (styleModuleImportMapKeys.length === 0) {\n        throw new Error(`Cannot use styleName attribute for style name '${styleName\n        }' without importing at least one stylesheet.`);\n      }\n\n      if (styleModuleImportMapKeys.length > 1) {\n        if (!autoResolveMultipleImports) {\n          throw new Error(`Cannot use anonymous style name '${styleName\n          }' with more than one stylesheet import without setting 'autoResolveMultipleImports' to true.`);\n        }\n\n        return getClassNameFromMultipleImports(\n          styleName,\n          styleModuleImportMap,\n          handleMissingStyleName,\n        );\n      }\n\n      const styleModuleMap: StyleModuleMapType = styleModuleImportMap[styleModuleImportMapKeys[0]];\n\n      if (!styleModuleMap[styleName]) {\n        return handleError(`Could not resolve the styleName '${styleName}'.`, handleMissingStyleName);\n      }\n\n      return styleModuleMap[styleName];\n    })\n    // Remove any styles which could not be found (if handleMissingStyleName === 'ignore')\n    .filter((className) => className)\n    .join(' ');\n};\n"],"mappings":"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","ignoreList":[]}