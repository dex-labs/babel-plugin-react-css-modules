{"version":3,"file":"getClassName.js","names":["_optionsDefaults","_interopRequireDefault","require","e","__esModule","default","isNamespacedStyleName","styleName","includes","handleError","message","handleMissingStyleName","Error","console","warn","getClassNameForNamespacedStyleName","styleModuleImportMap","handleMissingStyleNameOption","styleNameParts","split","importName","moduleName","optionsDefaults","getClassNameFromMultipleImports","importKeysWithMatches","Object","keys","map","importKey","filter","length","join","_default","styleNameValue","options","styleModuleImportMapKeys","autoResolveMultipleImports","styleModuleMap","className","exports"],"sources":["../src/getClassName.js"],"sourcesContent":["// @flow\n\nimport optionsDefaults from './schemas/optionsDefaults';\nimport type {\n  StyleModuleMapType,\n  StyleModuleImportMapType,\n  HandleMissingStyleNameOptionType,\n  GetClassNameOptionsType,\n} from './types';\n\nconst isNamespacedStyleName = (styleName: string): boolean => styleName.includes('.');\n\nconst handleError = (\n  message: string,\n  handleMissingStyleName: HandleMissingStyleNameOptionType,\n): null => {\n  if (handleMissingStyleName === 'throw') {\n    throw new Error(message);\n  } else if (handleMissingStyleName === 'warn') {\n    // eslint-disable-next-line no-console\n    console.warn(message);\n  }\n\n  return null;\n};\n\nconst getClassNameForNamespacedStyleName = (\n  styleName: string,\n  styleModuleImportMap: StyleModuleImportMapType,\n  handleMissingStyleNameOption?: HandleMissingStyleNameOptionType,\n): ?string => {\n  // Note:\n  // Do not use the desctructing syntax with Babel.\n  // Desctructing adds _slicedToArray helper.\n  const styleNameParts = styleName.split('.');\n  const importName = styleNameParts[0];\n  const moduleName = styleNameParts[1];\n  const handleMissingStyleName = handleMissingStyleNameOption\n    || optionsDefaults.handleMissingStyleName;\n\n  if (!moduleName) {\n    return handleError(`Invalid style name: ${styleName}`, handleMissingStyleName);\n  }\n\n  if (!styleModuleImportMap[importName]) {\n    return handleError(`CSS module import does not exist: ${importName}`, handleMissingStyleName);\n  }\n\n  if (!styleModuleImportMap[importName][moduleName]) {\n    return handleError(`CSS module does not exist: ${moduleName}`, handleMissingStyleName);\n  }\n\n  return styleModuleImportMap[importName][moduleName];\n};\n\nconst getClassNameFromMultipleImports = (\n  styleName: string,\n  styleModuleImportMap: StyleModuleImportMapType,\n  handleMissingStyleNameOption?: HandleMissingStyleNameOptionType,\n): ?string => {\n  const handleMissingStyleName = handleMissingStyleNameOption\n    || optionsDefaults.handleMissingStyleName;\n\n  const importKeysWithMatches = Object.keys(styleModuleImportMap)\n    .map((importKey) => styleModuleImportMap[importKey][styleName] && importKey)\n    .filter((importKey) => importKey);\n\n  if (importKeysWithMatches.length > 1) {\n    throw new Error(`Cannot resolve styleName \"${styleName}\" because it is present in multiple imports:`\n      + `\\n\\n\\t${importKeysWithMatches.join('\\n\\t')\n      }\\n\\nYou can resolve this by using a named import, e.g:`\n      + `\\n\\n\\timport foo from \"${importKeysWithMatches[0]}\";`\n      + `\\n\\t<div styleName=\"foo.${styleName}\" />`\n      + '\\n\\n');\n  }\n\n  if (importKeysWithMatches.length === 0) {\n    return handleError(`Could not resolve the styleName '${styleName}'.`, handleMissingStyleName);\n  }\n\n  return styleModuleImportMap[importKeysWithMatches[0]][styleName];\n};\n\nexport default (\n  styleNameValue: string,\n  styleModuleImportMap: StyleModuleImportMapType,\n  options?: GetClassNameOptionsType,\n): string => {\n  const styleModuleImportMapKeys = Object.keys(styleModuleImportMap);\n\n  const {\n    handleMissingStyleName = optionsDefaults.handleMissingStyleName,\n    autoResolveMultipleImports = optionsDefaults.autoResolveMultipleImports,\n  } = options || {};\n\n  if (!styleNameValue) {\n    return '';\n  }\n\n  return styleNameValue\n    .split(' ')\n    .filter((styleName) => styleName)\n    .map((styleName) => {\n      if (isNamespacedStyleName(styleName)) {\n        return getClassNameForNamespacedStyleName(\n          styleName,\n          styleModuleImportMap,\n          handleMissingStyleName,\n        );\n      }\n\n      if (styleModuleImportMapKeys.length === 0) {\n        throw new Error(`Cannot use styleName attribute for style name '${styleName\n        }' without importing at least one stylesheet.`);\n      }\n\n      if (styleModuleImportMapKeys.length > 1) {\n        if (!autoResolveMultipleImports) {\n          throw new Error(`Cannot use anonymous style name '${styleName\n          }' with more than one stylesheet import without setting 'autoResolveMultipleImports' to true.`);\n        }\n\n        return getClassNameFromMultipleImports(\n          styleName,\n          styleModuleImportMap,\n          handleMissingStyleName,\n        );\n      }\n\n      const styleModuleMap: StyleModuleMapType = styleModuleImportMap[styleModuleImportMapKeys[0]];\n\n      if (!styleModuleMap[styleName]) {\n        return handleError(`Could not resolve the styleName '${styleName}'.`, handleMissingStyleName);\n      }\n\n      return styleModuleMap[styleName];\n    })\n    // Remove any styles which could not be found (if handleMissingStyleName === 'ignore')\n    .filter((className) => className)\n    .join(' ');\n};\n"],"mappings":"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","ignoreList":[]}